# ==============================================================================
# Slop Guess Server â€” Environment Variables
# ==============================================================================
# Copy this file to .env and fill in the values for your environment.
# Required variables are marked with [REQUIRED].
# All others have sensible defaults for local development.
# ==============================================================================

# --- Database ---

# [REQUIRED] PostgreSQL connection string
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/slopguess

# --- Authentication ---

# [REQUIRED] Secret key for signing JWT tokens. Use a long, random string in production.
JWT_SECRET=change-me-in-production

# --- AI / Image Generation ---

# OpenAI API key for image generation and embeddings.
# Leave empty to use mock providers during development.
OPENAI_API_KEY=

# Image generation provider: "openai" for real images, "mock" for placeholder images.
# Default: mock
IMAGE_PROVIDER=mock

# Embedding provider: "openai" for real embeddings, "mock" for random vectors.
# Default: mock
EMBEDDING_PROVIDER=mock

# --- Server ---

# Port the Express server listens on.
# Default: 3001
PORT=3001

# Node environment: "development", "production", or "test".
# Default: development
NODE_ENV=development

# CORS origin allowed for frontend requests.
# In development this should match the Vite dev server.
# In production this should match your deployed frontend URL.
# Default: http://localhost:5173
CORS_ORIGIN=http://localhost:5173

# Whether to trust proxy headers (X-Forwarded-For, X-Forwarded-Proto, etc.).
# Set to "true" when running behind a reverse proxy (nginx, load balancer).
# Required for accurate IP detection in rate limiting and logging.
# Default: false
TRUST_PROXY=false

# --- Logging ---

# Minimum log level: debug, info, warn, error.
# Default: info
LOG_LEVEL=info

# --- Rate Limiting ---

# Rate limit window duration in milliseconds.
# Default: 900000 (15 minutes)
RATE_LIMIT_WINDOW_MS=900000

# Maximum number of requests per window per IP address (general limiter).
# Auth and guess endpoints have their own stricter limits.
# Default: 100
RATE_LIMIT_MAX=100

# --- Game Configuration ---

# How long a round stays active before it expires, in hours.
# Default: 24
ROUND_DURATION_HOURS=24

# How often the scheduler checks for round expiry, in minutes.
# Default: 5
ROUND_CHECK_INTERVAL_MINUTES=5
