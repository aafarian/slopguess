# ==============================================================================
# Slop Guess Server â€” Environment Variables
# ==============================================================================
# Copy this file to .env and fill in the values for your environment.
# Required variables are marked with [REQUIRED].
# All others have sensible defaults for local development.
# ==============================================================================

# --- Database ---

# [REQUIRED] PostgreSQL connection string
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/slopguess

# --- Authentication ---

# [REQUIRED] Secret key for signing JWT tokens. Use a long, random string in production.
JWT_SECRET=change-me-in-production

# --- AI / Image Generation ---

# OpenAI API key for image generation and embeddings.
# Leave empty to use mock providers during development.
OPENAI_API_KEY=

# Image generation provider: "openai" for real images, "mock" for placeholder images.
# Default: mock
IMAGE_PROVIDER=mock

# Embedding provider: "openai" for real embeddings, "mock" for random vectors.
# Default: mock
EMBEDDING_PROVIDER=mock

# --- Server ---

# Port the Express server listens on.
# Default: 3001
PORT=3001

# Node environment: "development", "production", or "test".
# Default: development
NODE_ENV=development

# CORS origin allowed for frontend requests.
# In development this should match the Vite dev server.
# In production this should match your deployed frontend URL.
# Default: http://localhost:5173
CORS_ORIGIN=http://localhost:5173

# Whether to trust proxy headers (X-Forwarded-For, X-Forwarded-Proto, etc.).
# Set to "true" when running behind a reverse proxy (nginx, load balancer).
# Required for accurate IP detection in rate limiting and logging.
# Default: false
TRUST_PROXY=false

# --- Logging ---

# Minimum log level: debug, info, warn, error.
# Default: info
LOG_LEVEL=info

# --- Rate Limiting ---

# Rate limit window duration in milliseconds.
# Default: 900000 (15 minutes)
RATE_LIMIT_WINDOW_MS=900000

# Maximum number of requests per window per IP address (general limiter).
# Auth and guess endpoints have their own stricter limits.
# Default: 100
RATE_LIMIT_MAX=100

# --- Game Configuration ---

# How long a round stays active before it expires, in hours.
# Default: 1
ROUND_DURATION_HOURS=1

# How often the scheduler checks for round expiry, in minutes.
# Default: 5
ROUND_CHECK_INTERVAL_MINUTES=5

# --- Stripe / Monetization ---

# Whether monetization features (Stripe, ads, Pro tier) are enabled.
# Default: false
MONETIZATION_ENABLED=false

# Stripe secret key for server-side API calls.
# Leave empty to disable Stripe features (app works without it in dev).
STRIPE_SECRET_KEY=

# Stripe publishable key for client-side usage.
STRIPE_PUBLISHABLE_KEY=

# Stripe webhook signing secret for verifying incoming webhook events.
# Obtain from the Stripe dashboard under Webhooks.
STRIPE_WEBHOOK_SECRET=

# Stripe Price ID for the Pro one-time purchase.
# Create this in the Stripe dashboard under Products.
STRIPE_PRO_PRICE_ID=

# --- Print Shop ---

# Whether the print shop feature is enabled.
# Default: false
PRINT_SHOP_ENABLED=false

# Prodigi API key for print-on-demand fulfillment.
# Leave empty to disable print shop features (app works without it in dev).
PRODIGI_API_KEY=

# Prodigi API base URL.
# Use sandbox URL for development; switch to production URL for live orders.
# Default: https://api.sandbox.prodigi.com/v4.0
PRODIGI_API_URL=https://api.sandbox.prodigi.com/v4.0

# Margin percentage added on top of Prodigi base cost for print shop items.
# Default: 30
PRINT_SHOP_MARGIN_PERCENT=30

# --- Ads (Client-side) ---

# Google AdSense client ID (ca-pub-XXXX).
# Set as VITE_ADSENSE_CLIENT_ID in the client .env for Vite to expose it.
# Leave empty to disable ads.
# VITE_ADSENSE_CLIENT_ID=
