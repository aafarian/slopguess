# ==============================================================================
# Slop Guess â€” Production Environment Variables
# ==============================================================================
# Copy this file to .env and fill in every value before deploying.
# This file must NEVER contain real secrets. Commit only placeholder values.
#
# Variables marked [REQUIRED] have no safe default and must be set.
# Variables marked [RECOMMENDED] have a default but should be reviewed.
# All others have sensible production defaults.
# ==============================================================================

# ==============================================================================
# DATABASE
# ==============================================================================

# [REQUIRED] PostgreSQL connection string for the application server.
# Format: postgresql://<user>:<password>@<host>:<port>/<database>
# When using the bundled postgres container, host should be "postgres" (the
# Docker service name). For a managed database (e.g. RDS, Supabase), use the
# provider-supplied connection string.
DATABASE_URL=postgresql://slopguess:CHANGE_ME_STRONG_DB_PASSWORD@postgres:5432/slopguess

# --- Postgres container credentials (used by the postgres Docker service) ---

# Database name created on first launch.
POSTGRES_DB=slopguess

# [REQUIRED] Database superuser name.
POSTGRES_USER=slopguess

# [REQUIRED] Database superuser password. Must match the password in DATABASE_URL.
# Generate with: openssl rand -base64 32
POSTGRES_PASSWORD=CHANGE_ME_STRONG_DB_PASSWORD

# ==============================================================================
# AUTHENTICATION
# ==============================================================================

# [REQUIRED] Secret key used to sign and verify JWT tokens.
# Must be a long, cryptographically random string (>= 64 characters).
# Generate with: openssl rand -base64 64
JWT_SECRET=CHANGE_ME_GENERATE_WITH_openssl_rand_-base64_64

# ==============================================================================
# AI / IMAGE GENERATION
# ==============================================================================

# [REQUIRED] OpenAI API key for DALL-E image generation and text embeddings.
# Obtain from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-CHANGE_ME_YOUR_OPENAI_API_KEY

# Image generation provider. Use "openai" for production.
# Options: openai | mock
IMAGE_PROVIDER=openai

# Embedding provider for semantic similarity. Use "openai" for production.
# Options: openai | mock
EMBEDDING_PROVIDER=openai

# ==============================================================================
# SERVER
# ==============================================================================

# Port the Express server listens on inside its container.
# The reverse proxy (nginx) forwards requests to this port.
PORT=3001

# Node environment. Must be "production" for deployed instances.
NODE_ENV=production

# [REQUIRED] Allowed CORS origin for frontend requests.
# Must match the exact URL users visit (including protocol, no trailing slash).
CORS_ORIGIN=https://slopguess.com

# Trust proxy headers (X-Forwarded-For, X-Forwarded-Proto, etc.).
# Must be "true" when running behind nginx or any reverse proxy.
# Required for accurate IP detection in rate limiting and logging.
TRUST_PROXY=true

# ==============================================================================
# DOMAIN / TLS
# ==============================================================================

# [REQUIRED] The domain name for your deployment.
# Used by Certbot/Let's Encrypt to obtain TLS certificates and by nginx
# for the server_name directive.
DOMAIN=slopguess.com

# ==============================================================================
# LOGGING
# ==============================================================================

# Minimum log level. In production, "warn" reduces noise while still
# capturing actionable events. Use "info" if you need request-level logs.
# Options: debug | info | warn | error
LOG_LEVEL=warn

# ==============================================================================
# RATE LIMITING
# ==============================================================================

# Rate limit window duration in milliseconds.
# Default: 900000 (15 minutes)
RATE_LIMIT_WINDOW_MS=900000

# Maximum number of requests per window per IP address (general limiter).
# Auth and guess endpoints have their own stricter limits.
# [RECOMMENDED] Tune based on expected traffic.
# Default: 100
RATE_LIMIT_MAX=100

# ==============================================================================
# ADMIN
# ==============================================================================

# [REQUIRED] Secret key for admin API access (/api/admin/* routes).
# Requests must include this value in the X-Admin-Key header.
# Generate with: openssl rand -hex 32
ADMIN_API_KEY=CHANGE_ME_GENERATE_WITH_openssl_rand_-hex_32

# ==============================================================================
# GAME CONFIGURATION
# ==============================================================================

# How long a round stays active before it expires, in hours.
# Default: 1
ROUND_DURATION_HOURS=1

# How often the scheduler checks for round expiry, in minutes.
# Default: 5
ROUND_CHECK_INTERVAL_MINUTES=5

# ==============================================================================
# CLIENT (Vite build-time variables)
# ==============================================================================
# These variables are baked into the client bundle at build time.
# They are prefixed with VITE_ per Vite conventions.
# See: https://vitejs.dev/guide/env-and-mode.html

# Base URL for API requests. In production, nginx proxies /api to the server,
# so this can usually be left empty (the client uses relative /api paths).
# Only set this if your API lives on a separate domain.
# Example: https://api.slopguess.com
# VITE_API_BASE_URL=
